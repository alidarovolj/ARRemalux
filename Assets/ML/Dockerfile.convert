FROM python:3.9-slim

# Установка системных зависимостей
RUN apt-get update && apt-get install -y \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# Установка Python библиотек с правильными версиями
RUN pip install --no-cache-dir \
    "numpy<2.0" \
    "protobuf<4" \
    "onnx>=1.12,<1.17" \
    "coremltools==5.2.0" \
    "onnx-coreml==1.3"

WORKDIR /workspace

# Скрипт конвертации будет смонтирован извне
CMD ["python3", "convert_to_coreml.py"]


